import{r as g,j as e,L as D,S as b}from"./app-CdVxAg8i.js";import{A as M,U as u,D as R,a as U,b as A,c as E}from"./app-layout-Dy8fme9c.js";import{u as P,T as _,E as L,B as l}from"./toast-Ce_E53AR.js";import{a as c,B}from"./app-logo-icon-U2qgBo5p.js";import{P as I,C as $}from"./pagination-BBZ7fXFK.js";import{T as z,a as q,b as i,c as n,d as O,e as o}from"./table-DWAnErYD.js";import"./index-Bmwwqx-z.js";import"./index--wZOPH1x.js";import"./dialog-DW9u8hR6.js";import"./triangle-alert-k3Mmw9ab.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],H=c("RotateCcw",G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],F=c("ShieldCheck",V);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],K=c("Shield",J);function oe({auth:m,users:r={data:[],links:[],meta:{current_page:1,last_page:1,total:0}}}){var h;const[f,x]=g.useState(!1),[s,d]=g.useState(null),{toast:p}=P(),j=a=>{d(a),x(!0)},w=()=>{s&&b.patch(route("usuarios.reset-password",s.id),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{p({title:"Contraseña reseteada",description:`La contraseña de ${s.name} ha sido reseteada a su email.`}),d(null)},onError:()=>{p({title:"Error",description:"No se pudo resetear la contraseña. Intenta de nuevo.",variant:"destructive"})}})},y=()=>{d(null)},N=a=>{b.get(a,{},{preserveState:!0,preserveScroll:!0})},v=a=>a.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),C=a=>{const t=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-yellow-500","bg-red-500","bg-teal-500"],T=a.charCodeAt(0)%t.length;return t[T]},k=a=>a.some(t=>t.name==="super-admin")?e.jsxs(l,{className:"bg-gradient-to-r from-red-200/80 to-red-300/80 text-red-900 hover:from-red-300/80 hover:to-red-400/80 border-0 rounded-2xl px-4 py-2 font-bold shadow-lg shadow-red-200/50 backdrop-blur-sm flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Super Admin"]}):a.some(t=>t.name==="admin")?e.jsxs(l,{className:"bg-gradient-to-r from-blue-200/80 to-blue-300/80 text-blue-900 hover:from-blue-300/80 hover:to-blue-400/80 border-0 rounded-2xl px-4 py-2 font-bold shadow-lg shadow-blue-200/50 backdrop-blur-sm flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Admin"]}):e.jsx(l,{className:"bg-gradient-to-r from-gray-200/80 to-gray-300/80 text-gray-800 hover:from-gray-300/80 hover:to-gray-400/80 border-0 rounded-2xl px-4 py-2 font-bold shadow-lg shadow-gray-200/50 backdrop-blur-sm",children:"Usuario"}),S=a=>new Date(a).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx(_,{children:e.jsxs(M,{children:[e.jsx(D,{title:"Gestión de Usuarios"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white/70 backdrop-blur-lg rounded-3xl p-6 shadow-lg shadow-blue-200/50 border border-white/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-inner",children:e.jsx(u,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent drop-shadow-sm",children:"Gestión de Usuarios"}),e.jsx("p",{className:"text-lg text-gray-600 font-medium",children:"Administrar usuarios del sistema"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl px-4 py-2 shadow-inner",children:e.jsxs("span",{className:"text-sm font-bold text-purple-700",children:[((h=r==null?void 0:r.data)==null?void 0:h.length)||0," usuarios registrados"]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white/80 to-gray-50/80 backdrop-blur-lg rounded-3xl border border-white/50 shadow-xl shadow-purple-200/40 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-200/60 to-blue-200/60 p-6 border-b border-purple-300/30 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-400 to-blue-500 rounded-2xl flex items-center justify-center shadow-inner",children:e.jsx(u,{className:"text-white font-bold text-xl w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Usuarios del Sistema"})]})}),e.jsx("div",{className:"overflow-x-auto p-6",children:e.jsxs(z,{children:[e.jsx(q,{children:e.jsxs(i,{className:"border-none",children:[e.jsx(n,{className:"text-sm font-bold text-gray-700 bg-transparent uppercase tracking-wide",children:"Usuario"}),e.jsx(n,{className:"text-sm font-bold text-gray-700 bg-transparent uppercase tracking-wide",children:"Email"}),e.jsx(n,{className:"text-sm font-bold text-gray-700 bg-transparent uppercase tracking-wide",children:"Rol"}),e.jsx(n,{className:"text-sm font-bold text-gray-700 bg-transparent uppercase tracking-wide",children:"Registrado"}),e.jsx(n,{className:"text-sm font-bold text-gray-700 bg-transparent uppercase tracking-wide",children:"Acciones"})]})}),e.jsxs(O,{children:[r.data.map(a=>e.jsxs(i,{className:"border-none hover:bg-purple-200/30 transition-all duration-300 rounded-2xl",children:[e.jsx(o,{className:"py-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 ${C(a.name)} rounded-2xl flex items-center justify-center text-white text-sm font-bold shadow-lg`,children:v(a.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 text-lg",children:a.name}),e.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:["ID: ",a.id]})]})]})}),e.jsx(o,{className:"py-6",children:e.jsx("div",{className:"font-semibold text-gray-800 text-base",children:a.email})}),e.jsx(o,{className:"py-6",children:k(a.roles)}),e.jsx(o,{className:"py-6",children:e.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:S(a.created_at)})}),e.jsxs(o,{className:"py-6",children:[a.id!==m.user.id&&e.jsxs(R,{children:[e.jsx(U,{asChild:!0,children:e.jsx(B,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0 bg-gradient-to-br from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl shadow-lg border-0 transform hover:scale-105 transition-all duration-300",children:e.jsx(L,{className:"h-5 w-5 text-gray-700"})})}),e.jsx(A,{className:"bg-white/90 backdrop-blur-lg rounded-2xl shadow-xl border border-white/50 p-2",onCloseAutoFocus:t=>t.preventDefault(),children:e.jsxs(E,{onClick:t=>{t.preventDefault(),t.stopPropagation(),j(a)},className:"rounded-xl hover:bg-orange-100/80 text-orange-700 font-medium",children:[e.jsx(H,{className:"h-4 w-4 mr-3"}),"Resetear Contraseña"]})})]}),a.id===m.user.id&&e.jsx(l,{className:"bg-gradient-to-r from-green-200/80 to-green-300/80 text-green-900 border-0 rounded-2xl px-4 py-2 font-bold",children:"Tú"})]})]},a.id)),r.data.length===0&&e.jsx(i,{children:e.jsx(o,{colSpan:5,className:"text-center py-12 text-gray-600 font-semibold text-lg",children:"No hay usuarios registrados"})})]})]})})]}),(r==null?void 0:r.meta)&&r.meta.total>15&&e.jsx(I,{links:r.links||[],meta:r.meta,onPageChange:N})]})}),e.jsx($,{open:f,onOpenChange:x,title:"Resetear Contraseña",description:`¿Estás seguro de que quieres resetear la contraseña de ${s==null?void 0:s.name}? La nueva contraseña será su email: ${s==null?void 0:s.email}`,confirmText:"Sí, resetear",cancelText:"Cancelar",variant:"destructive",onConfirm:w,onCancel:y})]})})}export{oe as default};
