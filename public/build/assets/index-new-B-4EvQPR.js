import{r as S,j as e,L as q,S as _}from"./app-Dzf-In3L.js";import{A,D as O,a as U,b as H,c as g,F as R}from"./app-layout-D4y6hpIw.js";import{u as W,T as G,P as J,F as K,B as c,S as Q,E as V,a as X,b as Y,I as Z}from"./toast-D9oL-JHM.js";import{B as D}from"./app-logo-icon-BKbWqYNi.js";import{C as d,a as p,d as j}from"./card-D-WaLD1T.js";import{P as ee,C as se}from"./package-D5FcLd43.js";import{C as E}from"./clock-CZzXgtnv.js";import{C as P}from"./circle-check-big-B5MlU8CF.js";import{D as ae}from"./download-p24Qya7j.js";import"./index-BNUKEJsK.js";import"./index-B1pEl9gQ.js";import"./label-DqHN1Fdb.js";import"./select-DMYKNWXN.js";import"./check-BVrdBpEM.js";import"./dialog-mOp67Hs1.js";function be({solicitudes:a={data:[],links:[],meta:{current_page:1,last_page:1,total:0}},filters:i={},estados:u=[],prioridades:b=[]}){var y,v,w,C;const[L,o]=S.useState(!1),[m,x]=S.useState(null),{toast:h}=W(),f=(s,r)=>{_.get(route("solicitudes.index"),{...i,[s]:r||void 0},{preserveState:!0,preserveScroll:!0})},k=s=>{x(s),o(!0)},F=s=>{confirm(`¿Estás seguro de que quieres eliminar la solicitud de ${s.nombre_cliente}?`)&&_.delete(route("solicitudes.destroy",s.id),{onSuccess:()=>{h({title:"Solicitud eliminada",description:`La solicitud de ${s.nombre_cliente} ha sido eliminada correctamente.`})},onError:()=>{h({title:"Error",description:"No se pudo eliminar la solicitud. Intenta de nuevo.",variant:"destructive"})}})},M=()=>{h({title:m?"Solicitud actualizada":"Solicitud creada",description:m?"Los cambios han sido guardados correctamente.":"La nueva solicitud ha sido creada exitosamente."}),x(null)},T=s=>{switch(s){case"alta":return"bg-red-100 text-red-800 border-red-200";case"media":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"baja":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=s=>{switch(s){case"pendiente":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"en_diseño":return"bg-blue-100 text-blue-800 border-blue-200";case"en_programación":return"bg-purple-100 text-purple-800 border-purple-200";case"completada":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},$=s=>new Date(s).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),z=s=>s.split(" ").map(r=>r.charAt(0)).join("").substring(0,2).toUpperCase(),B=s=>{const r=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-red-500","bg-yellow-500","bg-teal-500"],n=s.length%r.length;return r[n]},t=((y=a==null?void 0:a.data)==null?void 0:y.filter(s=>s.estado==="pendiente"||s.estado==="en_diseño"||s.estado==="en_programación"))||[],l=((v=a==null?void 0:a.data)==null?void 0:v.filter(s=>s.estado==="completada"))||[],N=({solicitud:s,showEstado:r=!0})=>{var n;return e.jsxs(d,{className:"hover:shadow-lg transition-all duration-200 border border-gray-200",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-semibold ${B(s.nombre_cliente)}`,children:z(s.nombre_cliente)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:s.nombre_cliente}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:((n=s.user)==null?void 0:n.name)||"Usuario"})]})]}),e.jsxs(O,{children:[e.jsx(U,{asChild:!0,children:e.jsx(D,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(V,{className:"h-4 w-4"})})}),e.jsxs(H,{align:"end",children:[e.jsxs(g,{onClick:()=>k(s),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Editar"]}),s.archivo_pdf&&e.jsx(g,{asChild:!0,children:e.jsxs("a",{href:`/storage/${s.archivo_pdf}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Descargar PDF"]})}),e.jsxs(g,{onClick:()=>F(s),className:"text-red-600",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]})]})}),e.jsx(j,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:s.nombre_landing}),e.jsx("p",{className:"text-xs text-gray-600",children:s.nombre_producto})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[r&&e.jsx(c,{className:`text-xs px-2 py-1 ${I(s.estado)}`,children:s.estado==="en_diseño"?"En Diseño":s.estado==="en_programación"?"En Programación":s.estado==="pendiente"?"Pendiente":s.estado.replace("_"," ")}),e.jsx(c,{className:`text-xs px-2 py-1 ${T(s.prioridad)}`,children:s.prioridad})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-3 w-3"}),$(s.fecha_creacion)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.archivo_pdf&&e.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(R,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"PDF"})]}),s.logo&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Logo"})]})]})]})]})})]})};return e.jsx(G,{children:e.jsxs(A,{children:[e.jsx(q,{title:"Solicitudes de Landing Page"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(ee,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Mundo Web"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Solicitudes de Landing Page • ",((w=a==null?void 0:a.data)==null?void 0:w.length)||0," solicitudes activas"]})]})]}),e.jsxs(D,{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Nueva Solicitud"]})]}),e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(K,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-sm",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Estado"}),e.jsxs("select",{value:i.estado||"",onChange:s=>f("estado",s.target.value),className:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),u.map(s=>e.jsx("option",{value:s,children:s.replace("_"," ")},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Prioridad"}),e.jsxs("select",{value:i.prioridad||"",onChange:s=>f("prioridad",s.target.value),className:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todas las prioridades"}),b.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:[((C=a==null?void 0:a.data)==null?void 0:C.length)||0," resultados"]})})]})]}),e.jsxs(d,{className:"border-l-4 border-l-yellow-400",children:[e.jsx(p,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Proyectos en Desarrollo"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.length," en curso"]})]})]}),e.jsxs(c,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[t.length," en curso"]})]})}),e.jsx(j,{children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"font-medium",children:"No hay proyectos en desarrollo"}),e.jsx("p",{className:"text-sm",children:"Los nuevos proyectos aparecerán aquí."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(s=>e.jsx(N,{solicitud:s},s.id))})})]}),e.jsxs(d,{className:"border-l-4 border-l-green-400",children:[e.jsx(p,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-400 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Proyectos Completados"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[l.length," finalizados"]})]})]}),e.jsxs(c,{variant:"secondary",className:"bg-green-100 text-green-800",children:[l.length," finalizados"]})]})}),e.jsx(j,{children:l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(P,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"font-medium",children:"No hay proyectos completados"}),e.jsx("p",{className:"text-sm",children:"Los proyectos finalizados aparecerán aquí."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(s=>e.jsx(N,{solicitud:s,showEstado:!1},s.id))})})]})]}),e.jsx(Q,{open:L,onOpenChange:s=>{o(s),s||x(null)},solicitud:m,estados:u,prioridades:b,onSuccess:M})]})})}export{be as default};
