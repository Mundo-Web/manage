import{r as u,j as e,L as $,S as o}from"./app-DLTUbuAJ.js";import{A as B,F as A,D as z,a as q,b as H,c}from"./app-layout-BDUh-sTI.js";import{u as O,T as V,P as S,F as G,B as _,I as R,E as U,a as K,c as J,b as Q,S as W}from"./toast-EHHkXcOZ.js";import{a as T,B as l}from"./app-logo-icon-Dxxyt67P.js";import{I as X}from"./label-CAvydKIS.js";import{T as Y,a as Z,b as p,c as n,d as ee,e as t}from"./table-BvWsHMgZ.js";import{P as C,C as se}from"./package--BCkVogw.js";import{D as ae}from"./download-CiScK3qN.js";import"./index-DnV0_KbW.js";import"./index-CJOajWTT.js";import"./select-DWy__aNn.js";import"./check-BUm2afca.js";import"./dialog-BLJpcJMA.js";import"./circle-check-big-DWC3mklR.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],te=T("Search",re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],le=T("User",ne);function fe({solicitudes:r,filters:a,estados:j,prioridades:v}){var f,y,w;const[k,i]=u.useState(!1),[d,m]=u.useState(null),[x,D]=u.useState(a.search||""),{toast:h}=O(),N=s=>{o.get(route("solicitudes.index"),{...a,search:s||void 0},{preserveState:!0,preserveScroll:!0})},b=(s,g)=>{o.get(route("solicitudes.index"),{...a,[s]:g||void 0},{preserveState:!0,preserveScroll:!0})},E=s=>{m(s),i(!0)},P=s=>{confirm(`¿Estás seguro de que quieres eliminar la solicitud de ${s.nombre_cliente}?`)&&o.delete(route("solicitudes.destroy",s.id),{onSuccess:()=>{h({title:"Solicitud eliminada",description:`La solicitud de ${s.nombre_cliente} ha sido eliminada correctamente.`})},onError:()=>{h({title:"Error",description:"No se pudo eliminar la solicitud. Intenta de nuevo.",variant:"destructive"})}})},L=()=>{h({title:d?"Solicitud actualizada":"Solicitud creada",description:d?"Los cambios han sido guardados correctamente.":"La nueva solicitud ha sido creada exitosamente."}),m(null)},M=s=>{switch(s){case"alta":return"bg-red-100 text-red-800 hover:bg-red-200";case"media":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"baja":return"bg-green-100 text-green-800 hover:bg-green-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},F=s=>{switch(s){case"pendiente":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"en_proceso":return"bg-blue-100 text-blue-800 hover:bg-blue-200";case"completado":return"bg-green-100 text-green-800 hover:bg-green-200";case"cancelado":return"bg-red-100 text-red-800 hover:bg-red-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},I=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx(V,{children:e.jsxs(B,{children:[e.jsx($,{title:"Gestión de Solicitudes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Solicitudes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Administra las solicitudes de landing pages y su estado."})]}),e.jsxs(l,{onClick:()=>i(!0),className:"bg-indigo-600 hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Nueva Solicitud"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(X,{placeholder:"Buscar por cliente, landing page o producto...",value:x,onChange:s=>D(s.target.value),onKeyDown:s=>{s.key==="Enter"&&N(x)},className:"pl-10 transition-all duration-200 focus:ring-2 focus:ring-indigo-500"})]})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsxs("select",{value:a.estado||"",onChange:s=>b("estado",s.target.value),className:"w-full h-10 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Todos los estados"}),j.map(s=>e.jsx("option",{value:s,children:s.replace("_"," ")},s))]})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsxs("select",{value:a.prioridad||"",onChange:s=>b("prioridad",s.target.value),className:"w-full h-10 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Todas las prioridades"}),v.map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsxs(l,{onClick:()=>N(x),variant:"outline",className:"transition-all duration-200 hover:bg-gray-50",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Buscar"]})]})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Mostrando ",r.data.length," de ",((f=r.meta)==null?void 0:f.total)||0," solicitudes"]}),(a.search||a.estado||a.prioridad)&&e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>o.get(route("solicitudes.index")),className:"text-indigo-600 hover:text-indigo-800",children:"Limpiar filtros"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(p,{className:"bg-gray-50/50",children:[e.jsx(n,{className:"font-semibold text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),"Cliente"]})}),e.jsx(n,{className:"font-semibold text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Proyecto"]})}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Estado"}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Prioridad"}),e.jsx(n,{className:"font-semibold text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Fecha"]})}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Archivos"}),e.jsx(n,{className:"text-center font-semibold text-gray-900",children:"Acciones"})]})}),e.jsx(ee,{children:r.data.length===0?e.jsx(p,{children:e.jsx(t,{colSpan:7,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 text-gray-500",children:[e.jsx(C,{className:"h-12 w-12 text-gray-300"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"No hay solicitudes"}),e.jsx("p",{className:"text-sm",children:a.search||a.estado||a.prioridad?"No se encontraron solicitudes con los filtros aplicados.":"Comienza creando tu primera solicitud de landing page."})]}),!(a.search||a.estado||a.prioridad)&&e.jsxs(l,{onClick:()=>i(!0),className:"mt-2",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Crear Primera Solicitud"]})]})})}):r.data.map(s=>e.jsxs(p,{className:"hover:bg-gray-50/50 transition-colors duration-150",children:[e.jsx(t,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.nombre_cliente}),s.user&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Por: ",s.user.name]})]})}),e.jsx(t,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.nombre_landing}),e.jsx("div",{className:"text-sm text-gray-500",children:s.nombre_producto})]})}),e.jsx(t,{children:e.jsx(_,{className:`${F(s.estado)} transition-colors duration-150`,children:s.estado.replace("_"," ")})}),e.jsx(t,{children:e.jsx(_,{className:`${M(s.prioridad)} transition-colors duration-150`,children:s.prioridad})}),e.jsx(t,{children:e.jsx("div",{className:"text-sm",children:I(s.fecha_creacion)})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.archivo_pdf&&e.jsxs("a",{href:`/storage/${s.archivo_pdf}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors duration-150",title:"Ver PDF",children:[e.jsx(A,{className:"h-3 w-3"}),"PDF"]}),s.logo&&e.jsxs("a",{href:`/storage/${s.logo}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs px-2 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200 transition-colors duration-150",title:"Ver Logo",children:[e.jsx(R,{className:"h-3 w-3"}),"Logo"]}),!s.archivo_pdf&&!s.logo&&e.jsx("span",{className:"text-xs text-gray-400",children:"Sin archivos"})]})}),e.jsx(t,{children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(z,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(l,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100 transition-colors duration-150",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Abrir menú"})]})}),e.jsxs(H,{align:"end",className:"w-48",children:[e.jsxs(c,{onClick:()=>E(s),className:"cursor-pointer",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Editar"]}),s.archivo_pdf&&e.jsx(c,{asChild:!0,children:e.jsxs("a",{href:`/storage/${s.archivo_pdf}`,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Descargar PDF"]})}),s.logo&&e.jsx(c,{asChild:!0,children:e.jsxs("a",{href:`/storage/${s.logo}`,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Ver Logo"]})}),e.jsxs(c,{onClick:()=>P(s),className:"cursor-pointer text-red-600 focus:text-red-600",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]})})})]},s.id))})]})}),r.links&&r.links.length>3&&e.jsx("div",{className:"border-t px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Página ",(y=r.meta)==null?void 0:y.current_page," de ",(w=r.meta)==null?void 0:w.last_page]}),e.jsx("div",{className:"flex gap-2",children:r.links.map((s,g)=>e.jsx(l,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&o.get(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label},className:"transition-all duration-150"},g))})]})})]})]}),e.jsx(W,{open:k,onOpenChange:s=>{i(s),s||m(null)},solicitud:d,estados:j,prioridades:v,onSuccess:L})]})})}export{fe as default};
